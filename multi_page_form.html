<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Page Application Form</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .question-container {
            display: none;
            margin-bottom: 20px;
        }

        .active {
            display: block;
        }

        .required:after {
            content: "*";
            color: red;
            margin-left: 3px;
        }

        .navigation-buttons {
            margin-top: 20px;
            text-align: center;
        }

        .navigation-buttons button {
            padding: 12px 24px;
            margin: 0 10px;
            border: none;
            border-radius: 6px;
            background-color: #3498db;
            color: #fff;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .navigation-buttons button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        .error-message {
            color: red;
            margin-top: 5px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }

        input[type="text"], input[type="email"], textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
            margin-bottom: 12px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        input[type="text"]:focus, input[type="email"]:focus, textarea:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 5px rgba(52, 152, 219, 0.5);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .error {
            border-color: #e74c3c !important;
        }
    </style>
</head>
<body>
    <div id="topnav-container"></div>
    <div class="container">
        <h1>Application Form</h1>
        <form id="application-form" action="https://formspree.io/f/YOUR_FORM_ID" method="POST">
            <div id="form-container">
            </div>

            <div class="navigation-buttons">
                <button id="prev-button" type="button" disabled>Back</button>
                <button id="next-button" type="button">Next</button>
                <button type="submit" id="submit-button">Submit Application</button>
            </div>
        </form>
    </div>

    <script src="topnav.js"></script>
    <script>
        document.getElementById('topnav-container').innerHTML = topnavHTML;
    </script>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const applicationType = urlParams.get('application_type');
        const formContainer = document.getElementById('form-container');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const submitButton = document.getElementById('submit-button');
        const form = document.getElementById('application-form');

        let currentQuestionIndex = 0;
        let questions = [];

        // Define questions for each application type
        const applicationQuestions = {
            job: [
                {
                    label: 'Name', name: 'job-name', type: 'text', required: true
                },
                {
                    label: 'Email', name: 'job-email', type: 'email', required: true
                },
                {
                    label: 'Position Applying For', name: 'job-position', type: 'text', required: true
                },
                 {
                    label: 'Cover Letter', name: 'job-coverletter', type: 'textarea', required: false
                }
            ],
            scholarship: [
                {
                    label: 'Name', name: 'scholarship-name', type: 'text', required: true
                },
                {
                    label: 'Email', name: 'scholarship-email', type: 'email', required: true
                },
                {
                    label: 'GPA', name: 'scholarship-gpa', type: 'text', required: true
                }
            ],
            volunteer: [
                {
                    label: 'Name', name: 'volunteer-name', type: 'text', required: true
                },
                {
                    label: 'Email', name: 'volunteer-email', type: 'email', required: true
                },
                {
                    label: 'Availability', name: 'volunteer-availability', type: 'text', required: true
                }
            ]
        };

        // Load questions based on application type
        if (applicationQuestions[applicationType]) {
            questions = applicationQuestions[applicationType];
        } else {
            formContainer.innerHTML = '<p>Invalid application type.</p>';
        }

        function showQuestion(index) {
            formContainer.innerHTML = ''; // Clear previous question

            if (index >= 0 && index < questions.length) {
                const question = questions[index];
                const questionDiv = document.createElement('div');
                questionDiv.classList.add('question-container');
                if (index === 0) {
                    questionDiv.classList.add('active');
                }

                let requiredClass = question.required ? ' required' : '';

                questionDiv.innerHTML = `<label for="${question.name}" class="${requiredClass}">${question.label}:</label><input type="${question.type}" id="${question.name}" name="${question.name}">`;
                formContainer.appendChild(questionDiv);
            }

            // Update button states
            prevButton.disabled = index === 0;
            nextButton.disabled = index === questions.length - 1;
        }

        function validateQuestion(index) {
            const question = questions[index];
            const inputElement = document.getElementById(question.name);

            if (question.required) {
                if (!inputElement.value.trim()) {
                    // Display error message (you can customize this)
                    inputElement.classList.add("error");
                    return false;
                } else {
                    inputElement.classList.remove("error");
                    return true;
                }
            } else {
                return true; // Optional questions are always valid
            }
        }

        // Navigation
        nextButton.addEventListener('click', () => {
            if (validateQuestion(currentQuestionIndex)) {
                currentQuestionIndex++;
                showQuestion(currentQuestionIndex);
            }
        });

        prevButton.addEventListener('click', () => {
            currentQuestionIndex--;
            showQuestion(currentQuestionIndex);
        });

        // Form submission
        form.addEventListener('submit', (event) => {
            if (!validateQuestion(currentQuestionIndex)) {
                event.preventDefault(); // Prevent submission if the current question is invalid
            }
           const inputElements = formContainer.querySelectorAll('input, textarea');
            inputElements.forEach(input => {
                const hiddenInput = document.createElement('input');
                hiddenInput.type = 'hidden';
                hiddenInput.name = input.name;
                hiddenInput.value = input.value;
                form.appendChild(hiddenInput);
        });
        });


        // Initial question display
        showQuestion(currentQuestionIndex);
    </script>
</body>
</html>